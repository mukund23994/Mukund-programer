<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Orders</title>
<style>
body { font-family: Arial; padding:20px; }
.order { border:1px solid #ccc; padding:10px; margin-bottom:10px; border-radius:6px; }
button { background:#ff2e00; color:white; border:none; padding:8px 12px; cursor:pointer; border-radius:4px; }
</style>
</head>
<body>

<h2>All Orders</h2>
<div id="orders"></div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBu2IUZ2RpB_pv0zA5nXqL7ur0uKZc8btE",
  authDomain: "indian-sellar-marketplac-d6395.firebaseapp.com",
  databaseURL: "https://indian-sellar-marketplac-d6395-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "indian-sellar-marketplac-d6395",
  storageBucket: "indian-sellar-marketplac-d6395.firebasestorage.app",
  messagingSenderId: "35436518492",
  appId: "1:35436518492:web:24c75eb5b85cd8f7d71a99"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const ordersDiv = document.getElementById("orders");

db.ref("orders").on("value", snapshot => {
  ordersDiv.innerHTML = "";
  const data = snapshot.val();
  if(!data) { ordersDiv.innerHTML = "<p>No orders yet</p>"; return; }

  Object.keys(data).forEach(key => {
    const order = data[key];
    let itemsHtml = "";
    order.items.forEach(item => { itemsHtml += `<li>${item.name} - â‚¹${item.price}</li>`; });

    const div = document.createElement("div");
    div.className = "order";
    div.innerHTML = `
      <p><b>Name:</b> ${order.name}</p>
      <p><b>Phone:</b> ${order.phone}</p>
      <p><b>Address:</b> ${order.address}</p>
      <p><b>Items:</b><ul>${itemsHtml}</ul></p>
      <p><b>Time:</b> ${order.time}</p>
      <button onclick="deleteOrder('${key}')">Delete Order</button>
    `;
    ordersDiv.appendChild(div);
  });
});

function deleteOrder(key){
  if(confirm("Delete this order?")){
    db.ref("orders/"+key).remove();
  }
}
</script>
</body>
</html>
