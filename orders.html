<!DOCTYPE html>
<html>
<head>
  <title>Admin Orders</title>
  <style>
    body { font-family: Arial; padding: 20px; }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      border: 1px solid #777;
      padding: 10px;
      text-align: left;
    }

    button {
      padding: 8px 12px;
      background: red;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    #loginBox {
      padding: 20px;
      background: #eee;
      width: 300px;
      margin: 50px auto;
      border-radius: 10px;
      text-align: center;
    }

    input {
      padding: 10px;
      width: 90%;
      margin-bottom: 10px;
    }
  </style>
</head>

<body>

<div id="loginBox">
  <h3>Admin Login</h3>
  <input type="password" id="adminPass" placeholder="Enter Password">
  <button onclick="checkLogin()">Login</button>
</div>

<div id="ordersSection" style="display:none;">
  <h2>All Orders</h2>
  <table id="ordersTable">
    <tr>
      <th>Name</th>
      <th>Phone</th>
      <th>Address</th>
      <th>Items</th>
      <th>Delete</th>
    </tr>
  </table>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>

const firebaseConfig = {
  apiKey: "AIzaSyBu2IUZ2RpB_pv0zA5nXqL7ur0uKZc8btE",
  authDomain: "indian-sellar-marketplac-d6395.firebaseapp.com",
  databaseURL: "https://indian-sellar-marketplac-d6395-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "indian-sellar-marketplac-d6395",
  storageBucket: "indian-sellar-marketplac-d6395.firebasestorage.app",
  messagingSenderId: "35436518492",
  appId: "1:35436518492:web:24c75eb5b85cd8f7d71a99"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let correctPass = "mukund123bihari";  // YOUR ADMIN PASSWORD


// ðŸ” Admin Login
function checkLogin() {
  let pass = document.getElementById("adminPass").value;
  
  if (pass === correctPass) {
    document.getElementById("loginBox").style.display = "none";
    document.getElementById("ordersSection").style.display = "block";
    loadOrders();
  } else {
    alert("Wrong Password!");
  }
}


// ðŸ“Œ Load Orders
function loadOrders() {
  db.ref("orders").on("value", snapshot => {
    let table = document.getElementById("ordersTable");
    table.innerHTML = `
      <tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Address</th>
        <th>Items</th>
        <th>Delete</th>
      </tr>
    `;
    
    snapshot.forEach(order => {
      let data = order.val();
      let row = `
        <tr>
          <td>${data.customerName}</td>
          <td>${data.phone}</td>
          <td>${data.address}</td>
          <td>${JSON.stringify(data.cartItems)}</td>
          <td><button onclick="deleteOrder('${order.key}')">Delete</button></td>
        </tr>
      `;
      table.innerHTML += row;
    });
  });
}


// âŒ DELETE Order
function deleteOrder(orderId) {
  let confirmDel = confirm("Are you sure you want to delete this order?");
  if (!confirmDel) return;

  db.ref("orders/" + orderId).remove()
    .then(() => {
      alert("Order deleted!");
      loadOrders();
    })
    .catch(err => alert("Error: " + err));
}

</script>

</body>
</html>
