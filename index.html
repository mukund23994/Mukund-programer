<!DOCTYPE html>
<html>
<head>
  <title>My Store - Guest Cart</title>
</head>
<body>
  <h1>Welcome to My Store</h1>

  <div id="products"></div>

  <h2>Your Cart</h2>
  <div id="cart"></div>

  <script>
    // ===== Sample Products =====
    const sampleProducts = [
      {id: "1", name: "Product 1", price: 499},
      {id: "2", name: "Product 2", price: 299},
      {id: "3", name: "Product 3", price: 199}
    ];

    const productsDiv = document.getElementById("products");
    const cartDiv = document.getElementById("cart");

    // ===== Display Products =====
    sampleProducts.forEach(product => {
      const productEl = document.createElement("div");
      productEl.innerHTML = `
        <h3>${product.name}</h3>
        <p>Price: ₹${product.price}</p>
        <button onclick="addToCart('${product.id}', '${product.name}', ${product.price})">Add to Cart</button>
      `;
      productsDiv.appendChild(productEl);
    });

    // ===== Add to Cart Function =====
    function addToCart(id, name, price) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      const index = cart.findIndex(p => p.id === id);

      if (index !== -1) {
        cart[index].quantity += 1;
      } else {
        cart.push({id, name, price, quantity: 1});
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      alert(name + " added to cart!");
      displayCart();
    }

    // ===== Display Cart =====
    function displayCart() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cartDiv.innerHTML = "";

      if (cart.length === 0) {
        cartDiv.innerHTML = "Cart is empty.";
        return;
      }

      let total = 0;
      cart.forEach(p => {
        const pEl = document.createElement("div");
        pEl.innerHTML = `${p.name} - ₹${p.price} x ${p.quantity} <button onclick="removeFromCart('${p.id}')">Remove</button>`;
        cartDiv.appendChild(pEl);
        total += p.price * p.quantity;
      });

      const totalEl = document.createElement("h3");
      totalEl.innerHTML = `Total: ₹${total}`;
      cartDiv.appendChild(totalEl);
    }

    // ===== Remove from Cart =====
    function removeFromCart(id) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart = cart.filter(p => p.id !== id);
      localStorage.setItem("cart", JSON.stringify(cart));
      displayCart();
    }

    // ===== Initialize Cart Display =====
    displayCart();
  </script>
</body>
</html>
